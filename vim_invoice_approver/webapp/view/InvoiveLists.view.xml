<mvc:View
    controllerName="com.invoiceapp.viminvoiceapprover.controller.InvoiveLists"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"
    xmlns:smartTable="sap.ui.comp.smarttable"
    xmlns:f="sap.f"
    xmlns:core="sap.ui.core"
>
    <Page
        showFooter="false"
        showHeader="true"
        title="Invoice Approval - NonPO"
    >
        <!-- SmartFilterBar for Pending Tab -->
        <smartFilterBar:SmartFilterBar
            id="smartFilterBarPending"
            entitySet="PendingTabForInternalUsers"
            persistencyKey="SmartFilter_Pending"
            visible="true"
        >
            <!-- <smartFilterBar:controlConfiguration>
                <smartFilterBar:ControlConfiguration
                    key="REQUEST_NO"
                    visibleInAdvancedArea="true"
                    label="Request Number"
                    conditionType="{
                        module: 'sap.ui.comp.config.condition.Type'
                    }"
                />
                <smartFilterBar:ControlConfiguration
                    key="INVOICE_DATE"
                    visibleInAdvancedArea="true"
                    label="Invoice Date"
                    conditionType="{
                        module: 'sap.ui.comp.config.condition.DateRangeType'
                    }"
                />
                <smartFilterBar:ControlConfiguration
                    key="TOTAL_AMOUNT"
                    visibleInAdvancedArea="true"
                    label="Total Amount"
                    conditionType="{
                        module: 'sap.ui.comp.config.condition.NumericType'
                    }"
                />
            </smartFilterBar:controlConfiguration> -->
        </smartFilterBar:SmartFilterBar>

        <!-- SmartFilterBar for Rejected Tab -->
        <smartFilterBar:SmartFilterBar
            id="smartFilterBarRejected"
            entitySet="RejectedTabForIU"
            persistencyKey="SmartFilter_Rejected"
            visible="false"
        >
            <!-- <smartFilterBar:controlConfiguration>
                <smartFilterBar:ControlConfiguration
                    key="REQUEST_NO"
                    visibleInAdvancedArea="true"
                    label="Request Number"
                    conditionType="{
                        module: 'sap.ui.comp.config.condition.Type'
                    }"
                />
                <smartFilterBar:ControlConfiguration
                    key="INVOICE_DATE"
                    visibleInAdvancedArea="true"
                    label="Invoice Date"
                    conditionType="{
                        module: 'sap.ui.comp.config.condition.DateRangeType'
                    }"
                />
                <smartFilterBar:ControlConfiguration
                    key="TOTAL_AMOUNT"
                    visibleInAdvancedArea="true"
                    label="Total Amount"
                    conditionType="{
                        module: 'sap.ui.comp.config.condition.NumericType'
                    }"
                />
            </smartFilterBar:controlConfiguration> -->
        </smartFilterBar:SmartFilterBar>

        <!-- SmartFilterBar for Approved Tab -->
        <smartFilterBar:SmartFilterBar
            id="smartFilterBarApproved"
            entitySet="ApprovedTabForFinalIU"
            persistencyKey="SmartFilter_Approved"
            visible="false"
        >
            <!-- <smartFilterBar:controlConfiguration>
                <smartFilterBar:ControlConfiguration
                    key="REQUEST_NO"
                    visibleInAdvancedArea="true"
                    label="Request Number"
                    conditionType="{
                        module: 'sap.ui.comp.config.condition.Type'
                    }"
                />
                <smartFilterBar:ControlConfiguration
                    key="INVOICE_DATE"
                    visibleInAdvancedArea="true"
                    label="Invoice Date"
                    conditionType="{
                        module: 'sap.ui.comp.config.condition.DateRangeType'
                    }"
                />
                <smartFilterBar:ControlConfiguration
                    key="TOTAL_AMOUNT"
                    visibleInAdvancedArea="true"
                    label="Total Amount"
                    conditionType="{
                        module: 'sap.ui.comp.config.condition.NumericType'
                    }"
                />
            </smartFilterBar:controlConfiguration> -->
        </smartFilterBar:SmartFilterBar>

        <!-- IconTabBar -->
        <IconTabBar
            id="idIconTabBarMulti"
            expanded="{device>/isNoPhone}"
            class="customTabBar"
            select="onTabSelect"
        >
            <items>
                <IconTabFilter
                    key="pending"
                    icon="./Images/open.png"
                    text="Pending"
                >
                    <smartTable:SmartTable
                        id="idSmartTablePend"
                        entitySet="PendingTabForInternalUsers"
                        smartFilterId="smartFilterBarPending"
                        enableExport="true"
                        beforeExport="onBeforeExport"
                        useVariantManagement="true"
                        useTablePersonalisation="true"
                        header="Pending Requests"
                        showRowCount="true"
                        persistencyKey="SmartTable_Pending"
                        enableAutoBinding="true"
                        tableType="ResponsiveTable"
                        demandPopin="true"
                        enableAutoColumnWidth="false"
                        beforeRebindTable="onRebindPending"
                        requestAtLeastFields="APPROVER_ROLE"
                    >
                        <Table
                            selectionChange="selectionChangeHandlerRregister"
                            growing="true"
                            growingThreshold="10"
                        >
                            <columns>
                                <Column
                                    hAlign="Center"
                                    demandPopin="true"
                                    minScreenWidth="Tablet"
                                    popinDisplay="Inline"
                                    width="auto"
                                >
                                    <customData>
                                        <core:CustomData
                                            key="p13nData"
                                            value='\{"columnKey": "COMPANY_LOGO","leadingProperty": "COMPANY_LOGO", "sortProperty": "COMPANY_LOGO", "filterProperty": "COMPANY_LOGO", "columnIndex": "0" }'
                                        />
                                    </customData>
                                    <Label text="Company Logo" wrapping="true" />
                                </Column>
                                <Column>
                                    <customData>
                                        <core:CustomData
                                            key="p13nData"
                                            value='\{"columnKey": "REQUEST_NO","leadingProperty": "REQUEST_NO", "sortProperty": "REQUEST_NO", "filterProperty": "REQUEST_NO", "columnIndex": "1" }'
                                        />
                                    </customData>
                                    <Label text="Req Number" wrapping="true" />
                                </Column>
                                <Column>
                                    <customData>
                                        <core:CustomData
                                            key="p13nData"
                                            value='\{"columnKey": "INVOICE_DATE","leadingProperty": "INVOICE_DATE", "sortProperty": "INVOICE_DATE", "filterProperty": "INVOICE_DATE", "columnIndex": "2" }'
                                        />
                                    </customData>
                                    <Label text="Invoice Date" wrapping="true" />
                                </Column>
                                <Column>
                                    <customData>
                                        <core:CustomData
                                            key="p13nData"
                                            value='\{"columnKey": "TOTAL_AMOUNT","leadingProperty": "TOTAL_AMOUNT", "sortProperty": "TOTAL_AMOUNT", "filterProperty": "TOTAL_AMOUNT", "columnIndex": "6" }'
                                        />
                                    </customData>
                                    <Label text="Amount" wrapping="true" />
                                </Column>
                                <Column>
                                    <customData>
                                        <core:CustomData
                                            key="p13nData"
                                            value='\{"columnKey": "SOURCE_TYPE","leadingProperty": "SOURCE_TYPE", "sortProperty": "SOURCE_TYPE", "filterProperty": "SOURCE_TYPE", "columnIndex": "7" }'
                                        />
                                    </customData>
                                    <Label text="Source Type" wrapping="true" />
                                </Column>
                                <Column>
                                    <customData>
                                        <core:CustomData
                                            key="p13nData"
                                            value='\{"columnKey": "Status","leadingProperty": "Status", "sortProperty": "Status", "filterProperty": "Status", "columnIndex": "8" }'
                                        />
                                    </customData>
                                    <Label text="Status" wrapping="true" />
                                </Column>
                            </columns>
                            <items>
                                <ColumnListItem vAlign="Middle" type="Navigation" press="onClickInvoiceList">
                                    <cells>
                                        <Avatar
                                            src="{= ${COMPANY_LOGO} ? ${COMPANY_LOGO} : './Images/Industry.png' }"
                                            displaySize="S"
                                            initials="{= ${VendorName} ? ${VendorName}.substring(0, 2).toUpperCase() : 'AB' }"
                                            displayShape="Circle"
                                            class="sapUiTinyMarginEnd"
                                        />
                                        <Text text="{REQUEST_NO}" />
                                        <Text text="{ path: 'INVOICE_DATE', formatter: '.formatODataDate' }" />
                                        <ObjectNumber number="{TOTAL_AMOUNT}" />
                                        <Text text="{ path: 'SOURCE_TYPE', formatter: '.formatSourceType' }" />
                                        <ObjectStatus
                                            text="{ path: 'APPROVER_ROLE', formatter: '.statusFormattertest' }"
                                            state="Indication13"
                                            inverted="true"
                                            class="noWrapText"
                                        />
                                    </cells>
                                </ColumnListItem>
                            </items>
                        </Table>
                    </smartTable:SmartTable>
                </IconTabFilter>
                <IconTabFilter
                    key="rejected"
                    icon="./Images/Rejected.png"
                    text="Rejected"
                >
                    <smartTable:SmartTable
                        id="idSmartTabRej"
                        entitySet="RejectedTabForIU"
                        smartFilterId="smartFilterBarRejected"
                        enableExport="true"
                        beforeExport="onBeforeExport"
                        useVariantManagement="true"
                        useTablePersonalisation="true"
                        header="Rejected Requests"
                        showRowCount="true"
                        persistencyKey="SmartTable_Rejected"
                        enableAutoBinding="true"
                        tableType="ResponsiveTable"
                        demandPopin="true"
                        enableAutoColumnWidth="false"
                        beforeRebindTable="onRebindReject"
                    >
                        <Table
                            selectionChange="selectionChangeHandlerRregister"
                            growing="true"
                            growingThreshold="10"
                        >
                            <columns>
                                <Column
                                    hAlign="Center"
                                    demandPopin="true"
                                    minScreenWidth="Tablet"
                                    popinDisplay="Inline"
                                    width="auto"
                                >
                                    <customData>
                                        <core:CustomData
                                            key="p13nData"
                                            value='\{"columnKey": "COMPANY_LOGO","leadingProperty": "COMPANY_LOGO", "sortProperty": "COMPANY_LOGO", "filterProperty": "COMPANY_LOGO", "columnIndex": "0" }'
                                        />
                                    </customData>
                                    <Label text="Company Logo" wrapping="true" />
                                </Column>
                                <Column>
                                    <customData>
                                        <core:CustomData
                                            key="p13nData"
                                            value='\{"columnKey": "REQUEST_NO","leadingProperty": "REQUEST_NO", "sortProperty": "REQUEST_NO", "filterProperty": "REQUEST_NO", "columnIndex": "1" }'
                                        />
                                    </customData>
                                    <Label text="Req Number" wrapping="true" />
                                </Column>
                                <Column>
                                    <customData>
                                        <core:CustomData
                                            key="p13nData"
                                            value='\{"columnKey": "INVOICE_DATE","leadingProperty": "INVOICE_DATE", "sortProperty": "INVOICE_DATE", "filterProperty": "INVOICE_DATE", "columnIndex": "3" }'
                                        />
                                    </customData>
                                    <Label text="Invoice Date" wrapping="true" />
                                </Column>
                                <Column>
                                    <customData>
                                        <core:CustomData
                                            key="p13nData"
                                            value='\{"columnKey": "TOTAL_AMOUNT","leadingProperty": "TOTAL_AMOUNT", "sortProperty": "TOTAL_AMOUNT", "filterProperty": "TOTAL_AMOUNT", "columnIndex": "5" }'
                                        />
                                    </customData>
                                    <Label text="Amount" wrapping="true" />
                                </Column>
                                <Column>
                                    <customData>
                                        <core:CustomData
                                            key="p13nData"
                                            value='\{"columnKey": "SOURCE_TYPE","leadingProperty": "SOURCE_TYPE", "sortProperty": "SOURCE_TYPE", "filterProperty": "SOURCE_TYPE", "columnIndex": "6" }'
                                        />
                                    </customData>
                                    <Label text="Source Type" wrapping="true" />
                                </Column>
                                <Column>
                                    <customData>
                                        <core:CustomData
                                            key="p13nData"
                                            value='\{"columnKey": "Status","leadingProperty": "Status", "sortProperty": "Status", "filterProperty": "Status", "columnIndex": "7" }'
                                        />
                                    </customData>
                                    <Label text="Status" wrapping="true" />
                                </Column>
                            </columns>
                            <items>
                                <ColumnListItem vAlign="Middle" type="Active">
                                    <cells>
                                        <Avatar
                                            src="{= ${COMPANY_LOGO} ? ${COMPANY_LOGO} : './Images/Industry.png' }"
                                            displaySize="S"
                                            initials="{= ${VendorName} ? ${VendorName}.substring(0, 2).toUpperCase() : 'AB' }"
                                            displayShape="Circle"
                                            class="sapUiTinyMarginEnd"
                                        />
                                        <Text text="{REQUEST_NO}" />
                                        <Text text="{ path: 'INVOICE_DATE', formatter: '.formatODataDate' }" />
                                        <ObjectNumber number="{TOTAL_AMOUNT}" />
                                        <Text text="{ path: 'SOURCE_TYPE', formatter: '.formatSourceType' }" />
                                        <ObjectStatus
                                            text="Rejected"
                                            state="Indication11"
                                            inverted="true"
                                            class="noWrapText"
                                        />
                                    </cells>
                                </ColumnListItem>
                            </items>
                        </Table>
                    </smartTable:SmartTable>
                </IconTabFilter>
                <IconTabFilter
                    key="approved"
                    icon="./Images/submitted.png"
                    text="Approved"
                >
                    <smartTable:SmartTable
                        id="idSmartTabApp"
                        entitySet="ApprovedTabForFinalIU"
                        smartFilterId="smartFilterBarApproved"
                        enableExport="true"
                        beforeExport="onBeforeExport"
                        useVariantManagement="true"
                        useTablePersonalisation="true"
                        header="Approved Requests"
                        showRowCount="true"
                        persistencyKey="SmartTable_Approved"
                        enableAutoBinding="true"
                        tableType="ResponsiveTable"
                        demandPopin="true"
                        enableAutoColumnWidth="false"
                        beforeRebindTable="onRebindApproved"
                    >
                        <Table
                            selectionChange="selectionChangeHandlerRregister"
                            growing="true"
                            growingThreshold="10"
                        >
                            <columns>
                                <Column
                                    hAlign="Center"
                                    demandPopin="true"
                                    minScreenWidth="Tablet"
                                    popinDisplay="Inline"
                                    width="auto"
                                >
                                    <customData>
                                        <core:CustomData
                                            key="p13nData"
                                            value='\{"columnKey": "COMPANY_LOGO","leadingProperty": "COMPANY_LOGO", "sortProperty": "COMPANY_LOGO", "filterProperty": "COMPANY_LOGO", "columnIndex": "0" }'
                                        />
                                    </customData>
                                    <Label text="Company Logo" wrapping="true" />
                                </Column>
                                <Column>
                                    <customData>
                                        <core:CustomData
                                            key="p13nData"
                                            value='\{"columnKey": "REQUEST_NO","leadingProperty": "REQUEST_NO", "sortProperty": "REQUEST_NO", "filterProperty": "REQUEST_NO", "columnIndex": "1" }'
                                        />
                                    </customData>
                                    <Label text="Req Number" wrapping="true" />
                                </Column>
                                <Column>
                                    <customData>
                                        <core:CustomData
                                            key="p13nData"
                                            value='\{"columnKey": "INVOICE_DATE","leadingProperty": "INVOICE_DATE", "sortProperty": "INVOICE_DATE", "filterProperty": "INVOICE_DATE", "columnIndex": "3" }'
                                        />
                                    </customData>
                                    <Label text="Invoice Date" wrapping="true" />
                                </Column>
                                <Column>
                                    <customData>
                                        <core:CustomData
                                            key="p13nData"
                                            value='\{"columnKey": "TOTAL_AMOUNT","leadingProperty": "TOTAL_AMOUNT", "sortProperty": "TOTAL_AMOUNT", "filterProperty": "TOTAL_AMOUNT", "columnIndex": "5" }'
                                        />
                                    </customData>
                                    <Label text="Amount" wrapping="true" />
                                </Column>
                                <Column>
                                    <customData>
                                        <core:CustomData
                                            key="p13nData"
                                            value='\{"columnKey": "SOURCE_TYPE","leadingProperty": "SOURCE_TYPE", "sortProperty": "SOURCE_TYPE", "filterProperty": "SOURCE_TYPE", "columnIndex": "6" }'
                                        />
                                    </customData>
                                    <Label text="Source Type" wrapping="true" />
                                </Column>
                                <Column>
                                    <customData>
                                        <core:CustomData
                                            key="p13nData"
                                            value='\{"columnKey": "Status","leadingProperty": "Status", "sortProperty": "Status", "filterProperty": "Status", "columnIndex": "8" }'
                                        />
                                    </customData>
                                    <Label text="Status" wrapping="true" />
                                </Column>
                            </columns>
                            <items>
                                <ColumnListItem vAlign="Middle" type="Active">
                                    <cells>
                                        <Avatar
                                            src="{= ${COMPANY_LOGO} ? ${COMPANY_LOGO} : './Images/Industry.png' }"
                                            displaySize="S"
                                            initials="{= ${VendorName} ? ${VendorName}.substring(0, 2).toUpperCase() : 'AB' }"
                                            displayShape="Circle"
                                            class="sapUiTinyMarginEnd"
                                        />
                                        <Text text="{REQUEST_NO}" />
                                        <Text text="{ path: 'INVOICE_DATE', formatter: '.formatODataDate' }" />
                                        <ObjectNumber number="{TOTAL_AMOUNT}" />
                                        <Text text="{ path: 'SOURCE_TYPE', formatter: '.formatSourceType' }" />
                                        <ObjectStatus
                                            text="Approved"
                                            state="Indication14"
                                            inverted="true"
                                            class="noWrapText"
                                        />
                                    </cells>
                                </ColumnListItem>
                            </items>
                        </Table>
                    </smartTable:SmartTable>
                </IconTabFilter>
            </items>
        </IconTabBar>
    </Page>
</mvc:View>